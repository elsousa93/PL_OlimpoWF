{
    "className": "org.joget.apps.form.model.Form",
    "elements": [
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [{
                    "className": "org.joget.apps.form.lib.Radio",
                    "properties": {
                        "controlField": "",
                        "id": "inicializacao_gestor",
                        "label": "Processo em análise pela equipa de validação",
                        "options": [
                            {
                                "grouping": "",
                                "label": "Sim",
                                "value": "SIM"
                            },
                            {
                                "grouping": "",
                                "label": "Não",
                                "value": "NAO"
                            }
                        ],
                        "optionsBinder": {
                            "className": "",
                            "properties": {}
                        },
                        "permission_rules": {
                            "3b4737b8-9f04-a406-1394-9be597a75957": {},
                            "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                            "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                            "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                        },
                        "readonly": "",
                        "readonlyLabel": "",
                        "validator": {
                            "className": "",
                            "properties": {}
                        },
                        "value": "NAO",
                        "workflowVariable": ""
                    }
                }],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "section4_1",
                "join": "",
                "label": "Validação",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionHidden": "",
                "permissionReadonly": "",
                "permission_rules": {
                    "3b4737b8-9f04-a406-1394-9be597a75957": {
                        "permissionHidden": "true",
                        "readonly": ""
                    },
                    "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                        "permissionHidden": "",
                        "readonly": ""
                    },
                    "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {
                        "permissionHidden": "",
                        "readonly": ""
                    },
                    "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                        "permissionHidden": "true",
                        "readonly": ""
                    }
                },
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field19",
                            "label": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "value": "<div class=\"col text-start\">\r\n    <span class=\"material-symbols-rounded md-40\"> menu_book <\/span> \r\n\t<div class = \"subform-section-title\">\r\n\t\t<span>CONSULTA<\/span>\r\n\t<\/div> \r\n<\/div>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.HiddenField",
                        "properties": {
                            "id": "id_processo",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "useDefaultWhenEmpty": "true",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "n_wf_banco",
                            "label": "Nº Workflow Banco",
                            "maxlength": "",
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "n_wf_pl_relacionado",
                            "label": "Número Processo PL Relacionado",
                            "maxlength": "",
                            "permission_rules": {
                                "04d94e96-37aa-1e4b-d5fe-5595f325e232": {},
                                "1fb8f1eb-7717-2af5-ccf1-03a73c560f16": {},
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "6c9a9c6d-bd10-4f4a-0682-541bcbb1222b": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "966fc1ca-d0b8-439f-6ab3-76cf9a599c75": {},
                                "9f700b46-bde2-cc69-98a7-c562c400ad6d": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "9fb8a08a-3747-1f8e-48ac-fff77f61d611": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "aa6ccea8-6e7f-1433-8d14-32132e9bf1e0": {},
                                "d07f81ea-a80c-4560-01fd-7772c1762b0f": {},
                                "d6fe0da9-3aa3-9d28-ded2-07a6fb980292": {},
                                "f6d47cc6-84dc-c359-9ec5-794a6dcbf118": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "org.joget.apps.form.lib.DefaultValidator",
                                "properties": {
                                    "mandatory": "",
                                    "message": "",
                                    "type": ""
                                }
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "nome_cliente",
                            "label": "Nome do Cliente",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.FormOptionsBinder",
                                "properties": {
                                    "addEmptyOption": "",
                                    "cacheInterval": "",
                                    "emptyLabel": "",
                                    "extraCondition": "c_id_processo = '#form.detalhe_proce_hip.id_processo[{form.processos_hip.detalhe_processo}]#' AND c_cliente_principal = 'CHECK'",
                                    "formDefId": "HIPInterveniente",
                                    "groupingColumn": "",
                                    "idColumn": "id",
                                    "labelColumn": "nome",
                                    "useAjax": ""
                                }
                            },
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                }
                            },
                            "readonly": "true",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "nif_cliente",
                            "label": "NIF do Cliente",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.FormOptionsBinder",
                                "properties": {
                                    "addEmptyOption": "",
                                    "cacheInterval": "",
                                    "emptyLabel": "",
                                    "extraCondition": "c_id_processo = '#form.detalhe_proce_hip.id_processo[{form.processos_hip.detalhe_processo}]#' AND c_cliente_principal = 'CHECK'",
                                    "formDefId": "HIPInterveniente",
                                    "groupingColumn": "",
                                    "idColumn": "id",
                                    "labelColumn": "nif",
                                    "useAjax": ""
                                }
                            },
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                }
                            },
                            "readonly": "true",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "forma_outorga",
                            "label": "Forma de Outorga",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.FormOptionsBinder",
                                "properties": {
                                    "addEmptyOption": "true",
                                    "cacheInterval": "",
                                    "emptyLabel": "",
                                    "extraCondition": "c_nome_campo = 'forma_outorga'",
                                    "formDefId": "adicionarOpcaoLV",
                                    "groupingColumn": "",
                                    "idColumn": "value",
                                    "labelColumn": "label",
                                    "useAjax": ""
                                }
                            },
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "tipo_processo_final",
                            "label": "Tipo de Processo",
                            "maxlength": "",
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "complex_processo",
                            "label": "Complexidade do Processo",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.FormOptionsBinder",
                                "properties": {
                                    "addEmptyOption": "true",
                                    "cacheInterval": "",
                                    "emptyLabel": "",
                                    "extraCondition": "c_nome_campo = 'complexidade_processo'",
                                    "formDefId": "adicionarOpcaoLV",
                                    "groupingColumn": "",
                                    "idColumn": "value",
                                    "labelColumn": "label",
                                    "useAjax": ""
                                }
                            },
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "fase_processo",
                            "label": "Fase do Processo",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.BeanShellFormBinder",
                                "properties": {
                                    "cacheInterval": "",
                                    "script": "import org.joget.apps.app.service.AppUtil;\nimport org.joget.apps.form.model.Element;\nimport org.joget.apps.form.model.FormData;\nimport org.joget.apps.form.model.FormRow;\nimport org.joget.apps.form.model.FormRowSet;\nimport org.joget.apps.form.model.FormStoreBinder;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport javax.sql.DataSource;\nimport org.joget.apps.form.service.FormUtil;\nimport org.joget.apps.app.model.AppDefinition;\nimport org.joget.commons.util.LogUtil;\nimport java.text.Normalizer;\n\npublic static String removerAcentos(String str) {\n    return Normalizer.normalize(str, Normalizer.Form.NFD).replaceAll(\"[^\\\\p{ASCII}]\", \"\");\n}\n\npublic FormRowSet getFaseProcesso() {\n    \n    FormRowSet f = new FormRowSet();\n    \n    Connection con = null;\n    PreparedStatement stmt = null;\n    ResultSet rs = null;\n    String origemVal = \"\";\n    String origem = \"\";\n    \n    AppDefinition appDef = AppUtil.getCurrentAppDefinition();\n    \n    \n    try{\n            DataSource ds = (DataSource)AppUtil.getApplicationContext().getBean(\"setupDataSource\");\n            con = ds.getConnection();\n            \n            \n            if(!con.isClosed()){\n                \n                \n                String ProcessID = \"#process.processId#\";\n                String idDetalheProcesso = \"#form.detalhe_proce_hip.id[{form.processos_hip.detalhe_processo}]#\";\n                \n                \n                /**Caso outro utilizador que não o assignado à tarefa faça alterações no processo, não será possivel obter o id do processo**/\n                //Assumindo que não existem subprocessos em paralelo\n                //Obter o id do processo mais recente\n                if(ProcessID.startsWith(\"#process.processId\")){\n                    \n                    //Obter campos do formulário de detalhe do processo\n                    Map paramValues = FormUtil.loadFormData(appDef.getAppId(), appDef.getVersion().toString(), \"HIPDetalheProcesso\", idDetalheProcesso, false, false, false, null);\n                    String mainProcessId = paramValues.get(\"id_processo\");\n                    String queryGetProcessId = \"SELECT Id FROM shkprocesses WHERE ActivityRequesterProcessId = ? order by created desc ;\";\n                    stmt = con.prepareStatement(queryGetProcessId);\n                    stmt.setObject(1, mainProcessId);\n                    rs = stmt.executeQuery();\n                    if(rs.next()){\n                        ProcessID = rs.getObject(\"Id\");\n                    }\n                }\n                \n                \n                boolean found = false;\n                \n                String queryGetFaseLabel = \"SELECT c_value, c_label FROM app_fd_listas_de_valores WHERE c_nome_campo = 'fase_processo' AND c_servico LIKE ?\";\n                stmt = con.prepareStatement(queryGetFaseLabel);\n                stmt.setObject(1, \"%HIP%\");\n                rs = stmt.executeQuery();\n                while(rs.next() && !found){\n                    String fase_value = rs.getString(1);\n                    String fase_label = rs.getString(2);\n                    if(ProcessID.contains(removerAcentos(fase_label)) ){\n                        FormRow r1 = new FormRow();\n                        r1.put(FormUtil.PROPERTY_VALUE, fase_value);\n                        r1.put(FormUtil.PROPERTY_LABEL, fase_label);\n                        f.add(r1);\n                        \n                        found = true;\n                        \n                        String queryUpdateFaseProcesso = \"UPDATE app_fd_detalhe_proce_hip SET c_fase_processo = ? WHERE id = ?\";\n                        stmt = con.prepareStatement(queryUpdateFaseProcesso);\n                        stmt.setObject(1, fase_value);\n                        stmt.setObject(2, idDetalheProcesso); //id registo do detalhe_processo\n                        rs = stmt.executeQuery();\n                        \n                    }\n                    \n                }\n                \n            }\n            \n    }catch(Exception e){\n        LogUtil.error(\"HIPOTECAS - Resumo - fase de processo\", e, \"Error getting info from DB\");\n    }finally{\n        try{\n            if(rs != null){\n            rs.close();\n            }\n            if(stmt != null){\n                stmt.close();\n            }\n            if(con != null && !con.isClosed()) {\n                con.close();\n            }\n        }catch(Exception e){\n            LogUtil.error(\"HIPOTECAS - Resumo - fase de processo\", e, \"Error closing DB connection\");\n        }\n        \n    }\n\n    return f;\n}\n \nreturn getFaseProcesso();\n\n        ",
                                    "useAjax": ""
                                }
                            },
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "readonly": "true",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "subfase_processo",
                            "label": "Subfase Processo",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.BeanShellFormBinder",
                                "properties": {
                                    "cacheInterval": "",
                                    "script": "import org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.model.Element;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.apps.form.model.FormRow;\r\nimport org.joget.apps.form.model.FormRowSet;\r\nimport java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport javax.sql.DataSource;\r\nimport org.joget.apps.form.service.FormUtil;\r\nimport org.joget.apps.app.model.AppDefinition;\r\nimport org.joget.commons.util.LogUtil;\r\n\r\n\r\npublic FormRowSet getSubFaseProcesso() {\r\n    String ProcessID = \"#process.processId#\";\r\n    FormRowSet f = new FormRowSet();\r\n    \r\n    Connection con = null;\r\n    PreparedStatement stmt = null;\r\n    ResultSet rs = null;\r\n\r\n    try{\r\n        DataSource ds = (DataSource)AppUtil.getApplicationContext().getBean(\"setupDataSource\");\r\n        con = ds.getConnection();\r\n        \r\n        \r\n        if(!con.isClosed()){\r\n            String actualSubfase = \"\";\r\n            String mainProcessId = \"#form.detalhe_proce_hip.id_processo[{form.processos_hip.detalhe_processo}]#\";\r\n            \r\n            /**Caso outro utilizador que não o assignado à tarefa faça alterações no processo, não será possivel obter o id do processo**/\r\n            //Assumindo que não existem subprocessos em paralelo\r\n            //Obter o id do processo mais recente\r\n            if(ProcessID.startsWith(\"#process.processId\")){\r\n                //LogUtil.info(\"HIP\", \"entra: \" );\r\n                String queryGetProcessId = \"SELECT Id FROM shkprocesses WHERE ActivityRequesterProcessId = ? order by created desc ;\";\r\n                stmt = con.prepareStatement(queryGetProcessId);\r\n                stmt.setObject(1, mainProcessId);\r\n                rs = stmt.executeQuery();\r\n                if(rs.next()){\r\n                    ProcessID = rs.getObject(\"Id\");\r\n                }\r\n                //LogUtil.info(\"HIP\", \"subfase 2: \" + actualSubFase);\r\n                //actualSubfase = \"#form.detalhe_proce_hip.subfase_processo[{form.processos_hip.detalhe_processo}]#\";\r\n                \r\n            }\r\n            \r\n            //Atualizar SubFase do Processo\r\n            String currentSubfase = \"#form.detalhe_proce_hip.subfase_processo[{form.processos_hip.detalhe_processo}]#\";\r\n            String userAssigned = \"\";\r\n            String idDetalhe_processo = \"#form.processos_hip.detalhe_processo#\";\r\n            \r\n            String queryGetSubfase = \"SELECT  a.`name` as subfase FROM shkassignmentstable asst JOIN shkactivities a ON a.id=asst.activityid WHERE asst.activityprocessid =? ;\";\r\n            stmt = con.prepareStatement(queryGetSubfase);\r\n            stmt.setObject(1, ProcessID);\r\n            rs = stmt.executeQuery();\r\n            \r\n            while(rs.next()){\r\n                actualSubfase = rs.getObject(\"subfase\");\r\n                FormRow r1 = new FormRow();\r\n                r1.put(FormUtil.PROPERTY_VALUE, actualSubfase);\r\n                r1.put(FormUtil.PROPERTY_LABEL, actualSubfase);\r\n                f.add(r1);\r\n            }\r\n        }\r\n        \r\n        \r\n            \r\n    }catch(Exception e){\r\n        LogUtil.error(\"HIPOTECAS - Resumo - Subfase de processo\", e, \"Error getting info from DB\");\r\n    }finally{\r\n        try{\r\n            if(rs != null){\r\n            rs.close();\r\n            }\r\n            if(stmt != null){\r\n                stmt.close();\r\n            }\r\n            if(con != null && !con.isClosed()) {\r\n                con.close();\r\n            }\r\n        }catch(Exception e){\r\n            LogUtil.error(\"HIPOTECAS - Resumo - Subfase de processo\", e, \"Error closing DB connection\");\r\n        }\r\n        \r\n    }\r\n    return f;\r\n    \r\n}\r\n \r\nreturn getSubFaseProcesso();",
                                    "useAjax": ""
                                }
                            },
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "readonly": "true",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "gestor_pl",
                            "label": "Gestor PL",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.BeanShellFormBinder",
                                "properties": {
                                    "cacheInterval": "",
                                    "script": "import org.joget.apps.app.service.AppUtil;\nimport org.joget.apps.form.model.Element;\nimport org.joget.apps.form.model.FormData;\nimport org.joget.apps.form.model.FormRow;\nimport org.joget.apps.form.model.FormRowSet;\nimport org.joget.apps.form.model.FormStoreBinder;\nimport java.sql.Connection;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport javax.sql.DataSource;\nimport org.joget.apps.form.service.FormUtil;\nimport org.joget.apps.app.model.AppDefinition;\nimport org.joget.commons.util.LogUtil;\n\n\npublic FormRowSet getUserAssigned() {\n    Connection con = null;\n    PreparedStatement stmt = null;\n    ResultSet rs = null;\n    String gestorPL = \"\";\n    \n    AppDefinition appDef = AppUtil.getCurrentAppDefinition();\n    \n    \n    try{\n            DataSource ds = (DataSource)AppUtil.getApplicationContext().getBean(\"setupDataSource\");\n            con = ds.getConnection();\n            \n            \n            if(!con.isClosed()){\n                \n                \n                String ProcessID = \"#process.processId#\";\n                String idDetalheProcesso = \"#form.detalhe_proce_hip.id[{form.processos_hip.detalhe_processo}]#\";\n                \n                /**Caso outro utilizador que não o assignado à tarefa faça alterações no processo, não será possivel obter o id do processo**/\n                //Assumindo que não existem subprocessos em paralelo\n                //Obter o id do processo mais recente\n                if(ProcessID.startsWith(\"#process.processId\")){\n                    \n                    //Obter campos do formulário de detalhe do processo\n                    Map paramValues = FormUtil.loadFormData(appDef.getAppId(), appDef.getVersion().toString(), \"detalheProcesso\", idDetalheProcesso, false, false, false, null);\n                    String mainProcessId = paramValues.get(\"id_processo\");\n                    String queryGetProcessId = \"SELECT Id FROM shkprocesses WHERE ActivityRequesterProcessId = ? order by created desc ;\";\n                    stmt = con.prepareStatement(queryGetProcessId);\n                    stmt.setObject(1, mainProcessId);\n                    rs = stmt.executeQuery();\n                    if(rs.next()){\n                        ProcessID = rs.getObject(\"Id\");\n                    }\n \n                }\n                \n                //Obter o utilizador a quem está atribuida a tarefa\n                String userAssigned = \"\";\n                String queryGetSubfase = \"SELECT asst.ResourceId as 'resourceId' FROM shkassignmentstable asst WHERE asst.activityprocessid =? ;\";\n                stmt = con.prepareStatement(queryGetSubfase);\n                stmt.setObject(1, ProcessID);\n                rs = stmt.executeQuery();\n                if(rs.next()){\n                    userAssigned = rs.getObject(\"resourceId\").toString();\n                }\n                \n                \n                \n                String idDetalhe_processo = \"#form.processos_hip.detalhe_processo#\";\n                //Verificar o utilizador atribuido e atualizar caso esteja errado\n                String queryGetGestorPL=\"SELECT c_gestor_pl FROM app_fd_detalhe_proce_hip WHERE id = ? ;\";\n                stmt = con.prepareStatement(queryGetGestorPL);\n                stmt.setObject(1, idDetalhe_processo);\n                rs = stmt.executeQuery();\n                \n                if(rs.next()){\n                    gestorPL = rs.getObject(\"c_gestor_pl\");\n                }\n                \n                \n                \n                if(gestorPL == null || gestorPL.isEmpty() || !gestorPL.equals(userAssigned)){\n                    String queryUpdateGestorPL = \"UPDATE app_fd_detalhe_proce_hip SET c_gestor_pl = ? WHERE id = ?\";\n                    stmt = con.prepareStatement(queryUpdateGestorPL);\n                    stmt.setObject(1, userAssigned);\n                    stmt.setObject(2, idDetalhe_processo); //id registo do detalhe_processo\n                    rs = stmt.executeQuery();\n                    gestorPL=userAssigned;\n                }\n                \n                \n                \n                \n            }\n            \n    }catch(Exception e){\n        LogUtil.error(\"HIPOTECAS - RESUMO - Gestor PL\", e, \"Error getting info from DB\");\n    }finally{\n        try{\n            if(rs != null){\n            rs.close();\n            }\n            if(stmt != null){\n                stmt.close();\n            }\n            if(con != null && !con.isClosed()) {\n                con.close();\n            }\n        }catch(Exception e){\n            LogUtil.error(\"HIPOTECAS - RESUMO - Gestor PL\", e, \"Error closing DB connection\");\n        }\n        \n    }\n    FormRowSet f = new FormRowSet();\n    FormRow r1 = new FormRow();\n    r1.put(FormUtil.PROPERTY_VALUE, gestorPL);\n    r1.put(FormUtil.PROPERTY_LABEL, gestorPL);\n    f.add(r1);\n    return f;\n}\n \nreturn getUserAssigned();\n        ",
                                    "useAjax": ""
                                }
                            },
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "gestor_pl_senior",
                            "label": "Gestor PL (sénior)",
                            "maxlength": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "estado_contratacao",
                            "label": "Estado da Contratação",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.FormOptionsBinder",
                                "properties": {
                                    "addEmptyOption": "true",
                                    "cacheInterval": "",
                                    "emptyLabel": "",
                                    "extraCondition": "c_nome_campo = 'estado_contratacao'",
                                    "formDefId": "adicionarOpcaoLV",
                                    "groupingColumn": "",
                                    "idColumn": "value",
                                    "labelColumn": "label",
                                    "useAjax": ""
                                }
                            },
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": "estado"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.DatePicker",
                        "properties": {
                            "allowManual": "",
                            "currentDateAs": "",
                            "dataFormat": "yyyy-MM-dd",
                            "datePickerType": "dateTime",
                            "endDateFieldId": "",
                            "format": "dd/mm/yy",
                            "format24hr": "true",
                            "id": "data_entrada",
                            "label": "Data de Última Entrada",
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "placeholder": "",
                            "readonly": "true",
                            "readonlyLabel": "",
                            "startDateFieldId": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": "",
                            "yearRange": "c-10:c+10"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "dateModified",
                            "label": "Data da Última Alteração",
                            "maxlength": "",
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "placeholder": "",
                            "readonly": "true",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextField",
                        "properties": {
                            "encryption": "",
                            "id": "alerta",
                            "label": "Alerta",
                            "maxlength": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "storeNumeric": "",
                            "style": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.plugin.enterprise.FormGrid",
                        "properties": {
                            "abortRelatedRunningProcesses": "",
                            "deleteFiles": "",
                            "deleteGridData": "",
                            "deleteMessage": "Delete row?",
                            "deleteSubformData": "",
                            "disabledAdd": "true",
                            "disabledDelete": "true",
                            "enableSorting": "",
                            "errorMessage": "Invalid number of rows",
                            "formDefId": "HIPProcesso",
                            "height": "500",
                            "id": "resumoObservacoes",
                            "label": "Resumo Observações",
                            "loadBinder": {
                                "className": "org.joget.apps.form.lib.BeanShellFormBinder",
                                "properties": {
                                    "autoHandleFiles": "",
                                    "autoHandleWorkflowVariable": "true",
                                    "cacheInterval": "",
                                    "script": "import java.sql.Connection;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport javax.sql.DataSource;\r\nimport org.joget.apps.form.model.*;\r\nimport org.joget.apps.form.service.*;\r\nimport java.sql.*;\r\nimport java.util.*;\r\nimport org.joget.apps.app.service.AppUtil;\r\nimport org.joget.commons.util.LogUtil;\r\n \r\nFormRowSet f = new FormRowSet();\r\nf.setMultiRow(true);\r\n \r\n//Get Joget's current datasource configs\r\nDataSource ds = (DataSource) AppUtil.getApplicationContext().getBean(\"setupDataSource\");\r\n \r\ncon = ds.getConnection();\r\n \r\ntry {\r\n    if (!con.isClosed()) {\r\n    \r\n      \r\n        //Here you can query from one or multiple tables using JOIN etc\r\n        String queryGetObs = \"SELECT p.id as PID, dp.c_observacoes as DPOBS, i.c_observacoes_intervenientes as IOBS, ab.c_observacoes as ABOBS, ab.c_observacoes_condicionalismo as ABCOBS, al.c_observacoes_pagamento as ALPOBS, a.c_observacoes_agendamento as AOBS FROM app_fd_processos_hip p LEFT JOIN app_fd_detalhe_proce_hip dp ON dp.id = p.c_detalhe_processo LEFT JOIN app_fd_interv_proce_hip i ON i.id = p.c_intervenientes LEFT JOIN app_fd_anal_banc_proce_hip ab ON ab.id = p.c_anal_banc LEFT JOIN app_fd_anal_legal_proce_hip al ON al.id = p.c_anal_legal LEFT JOIN app_fd_agendamento a ON a.id = p.c_agendamento WHERE p.id = '#form.processos_hip.id#'\";\r\n        PreparedStatement stmt = con.prepareStatement(queryGetObs);\r\n        //stmt.setString(1, recordId);\r\n      \r\n        //Execute the SELECT SQL statement\r\n        ResultSet rs = stmt.executeQuery();\r\n             \r\n        //Get value from columns of record(s)\r\n        if (rs.next()) {\r\n            String dp_obs = rs.getObject(\"DPOBS\");\r\n            String i_obs = rs.getObject(\"IOBS\");\r\n            String ab_obs =rs.getObject(\"ABOBS\");\r\n            String ab_cond_obs = rs.getObject(\"ABCOBS\");\r\n            String al_obs = rs.getObject(\"ALPOBS\");\r\n            String a_obs =  rs.getObject(\"AOBS\");\r\n            \r\n            if(dp_obs != null && !dp_obs.equals(\"\")){\r\n                FormRow r_detalheProcesso = new FormRow();\r\n                r_detalheProcesso.put(\"tabela\", \"Detalhe Processo:\");\r\n                r_detalheProcesso.put(\"observacoes\", dp_obs);\r\n                f.add(r_detalheProcesso);\r\n            }\r\n            if(i_obs != null && !i_obs.equals(\"\")){\r\n                FormRow r_intervenientes = new FormRow();\r\n                r_intervenientes.put(\"tabela\", \"Intervenientes:\");\r\n                r_intervenientes.put(\"observacoes\", i_obs);\r\n                f.add(r_intervenientes);\r\n            }\r\n            if(ab_obs != null && !ab_obs.equals(\"\")){\r\n                FormRow r_anal_banc = new FormRow();\r\n                r_anal_banc.put(\"tabela\", \"Análise Bancária:\");\r\n                r_anal_banc.put(\"observacoes\", ab_obs);\r\n                f.add(r_anal_banc);\r\n            }\r\n            if(ab_cond_obs != null && !ab_cond_obs.equals(\"\")){\r\n                FormRow r_anal_banc_condicionalismo = new FormRow();\r\n                r_anal_banc_condicionalismo.put(\"tabela\", \"Análise Bancária - Condicionalismo:\");\r\n                r_anal_banc_condicionalismo.put(\"observacoes\", ab_cond_obs);\r\n                f.add(r_anal_banc_condicionalismo);\r\n            }\r\n            if(al_obs != null && !al_obs.equals(\"\")){\r\n                FormRow r_anal_legal = new FormRow();\r\n                r_anal_legal.put(\"tabela\", \"Análise Legal - Pagamento:\");\r\n                r_anal_legal.put(\"observacoes\", al_obs);\r\n                f.add(r_anal_legal);\r\n            }\r\n            if(a_obs != null && !a_obs.equals(\"\")){\r\n                FormRow r_agendamento = new FormRow();\r\n                r_agendamento.put(\"tabela\", \"Agendamento:\");\r\n                r_agendamento.put(\"observacoes\", a_obs);\r\n                f.add(r_agendamento);\r\n            }\r\n        }\r\n    }\r\n}catch(Exception ex) {\r\n        LogUtil.error(\"HIPOTECAS - Resumo - tabela de observações\", ex, \"Error storing using jdbc\");\r\n} finally {\r\n    try {\r\n        if (con != null) {\r\n            con.close();\r\n        }\r\n    } catch (Exception ex) {\r\n        LogUtil.error(\"HIPOTECAS - Resumo - tabela de observações\", ex, \"Error closing the jdbc connection\");\r\n    }\r\n}\r\n \r\nreturn f;\r\n\r\n",
                                    "useAjax": ""
                                }
                            },
                            "options": [
                                {
                                    "format": "",
                                    "formatType": "text",
                                    "label": "Tab",
                                    "value": "tabela",
                                    "width": ""
                                },
                                {
                                    "format": "",
                                    "formatType": "nl2br",
                                    "label": "Observações",
                                    "value": "observacoes",
                                    "width": ""
                                }
                            ],
                            "pageSize": "20",
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "readonly": "true",
                            "readonlyLabel": "",
                            "showRowNumber": "",
                            "storeBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "submit-label-normal": "",
                            "submit-label-readonly": "",
                            "uniqueKey": "",
                            "validateMaxRow": "",
                            "validateMinRow": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "width": "900"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "apresentacao_campos",
                            "label": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "value": "<script>\n    \n    $(document).ready(function(){\n         \n        var faseProcesso = \"#process.processId#\";\n       \n        if(faseProcesso.includes(\"Contratacao\")){\n            $(\"select[name*=_fase_processo]\").val('CNT');\n        }else if(faseProcesso.includes(\"Filtro\")){\n            $(\"select[name*=_fase_processo]\").val('FLT');\n        }else if(faseProcesso.includes(\"Producao\")){\n            $(\"select[name*=_fase_processo]\").val('PRD');\n        }else if(faseProcesso.includes(\"Validacao\")){\n            $(\"select[name*=_fase_processo]\").val('VAL');\n        }else{\n            \n        }\n        \n        //Remover coluna para visualizar detalhe do resumoObservacoes\n        $(\"div[id*=resumoObservacoes] th.grid-action-header\").remove();\n        $(\"div[id*=resumoObservacoes] td.grid-action-cell\").remove();\n       \n       //READONLY\n       \n       //Apenas campos que pertencam a outra tabela - (se tiverem readonly nas permissões não carregam)\n       $(\"select[name*=_nome_cliente]\").prop('disabled', true);\n       $(\"select[name*=_nif_cliente]\").prop('disabled', true);\n       $(\"select[name*=_intervencao_juridica]\").prop('disabled', true);\n       $(\"select[name*=_intervencao_juridica_novo]\").prop('disabled', true);\n       \n       \n });\n\n\n    \n<\/script>"
                        }
                    }
                ],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "section1",
                "join": "",
                "label": "",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionHidden": "",
                "permissionReadonly": "",
                "permission_rules": {
                    "3b4737b8-9f04-a406-1394-9be597a75957": {
                        "permissionHidden": "",
                        "readonly": ""
                    },
                    "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                        "permissionHidden": "",
                        "readonly": ""
                    },
                    "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                    "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                        "permissionHidden": "",
                        "readonly": ""
                    }
                },
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field20",
                            "label": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "value": "<div class=\"col text-start\">\r\n    <span class=\"material-symbols-rounded md-40\"> next_plan <\/span> \r\n\t<div class = \"subform-section-title\">\r\n\t\t<span>Seguimento de Processo<\/span>\r\n\t<\/div> \r\n<\/div>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "envio_processo",
                            "label": "Enviar processo para:",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.BeanShellFormBinder",
                                "properties": {
                                    "cacheInterval": "",
                                    "script": "import org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.model.Element;\r\nimport org.joget.apps.form.model.Form;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.apps.form.model.FormRow;\r\nimport org.joget.apps.form.model.FormRowSet;\r\nimport org.joget.apps.form.model.defaultHashVariablePlugin;\r\nimport org.joget.apps.form.service.FormUtil;\r\nimport org.joget.commons.util.LogUtil;\r\nimport java.util.*;\r\n \r\npublic FormRowSet load(Element element, String primaryKey, FormData formData) {\r\n    \r\n    FormRowSet rows = new FormRowSet();\r\n    String processDefId = \"#process.processDefId#\";\r\n    String passagem = \"#envVariable.passagem#\";\r\n    int flagFiltro = 0;\r\n    int flagContratacao = 0;\r\n    int flagProducao = 0;\r\n    int flagValidacao = 0;\r\n    int flagAcompanhamento = 0;\r\n    int flagRegistos = 0;\r\n    int flagModelo11 = 0;\r\n    int flagConclusoes = 0;\r\n    int flagFinal = 0;\r\n\r\n\r\n    \r\n    //Enable and disable flags\r\n    if(processDefId.toLowerCase().contains(\"contratacao\")){\r\n        flagContratacao = 0;\r\n        flagFiltro = 0;\r\n        flagProducao = 1;\r\n        flagValidacao = 0;\r\n        flagAcompanhamento = 0;\r\n\t    flagRegistos = 0;\r\n\t    flagModelo11 = 0;\r\n        flagConclusoes = 0;\r\n        flagFinal = 0;\r\n        String estado_contratacao = \"#form.detalhe_proce_hip.estado_contratacao[{form.processos_hip.detalhe_processo}]#\";\r\n        String subfase = \"#form.detalhe_proce_hip.subfase_processo[{form.processos_hip.detalhe_processo}]#\";\r\n        //LogUtil.info(\"CCCCCCC\", \"estado_contratacao \" + estado_contratacao);\r\n        if(estado_contratacao.equals(\"CLD\")){\r\n             flagConclusoes = 1;\r\n             flagProducao = 0;\r\n        }\r\n        \r\n        if(subfase.contains(\"Preenchimento de Processo\") && !estado_contratacao.equals(\"FLT\")){\r\n            String valor_total_text = \"#form.imoveis_hip.valor_total_imoveis[{form.processos_hip.imoveis}]#\";\r\n            String valor_emprestimo_text = \"#form.anal_banc_proce_hip.valor_emprestimo[{form.processos_hip.anal_banc}]#\";\r\n            String valor_garantia_text = \"#form.anal_banc_proce_hip.valor_garantia[{form.processos_hip.anal_banc}]#\";\r\n            String tipo_processo = \"#form.detalhe_proce_hip.tipo_processo[{form.processos_hip.detalhe_processo}]#\"; \r\n           // LogUtil.info(\"CCCCCCC\", \"valor_garantia \" + valor_garantia_text);\r\n            if(tipo_processo.contains(\"TSUC\")){\r\n               flagFiltro = 1;\r\n               flagProducao = 0;\r\n               flagConclusoes = 0;\r\n            }else{\r\n                if(!valor_total_text.startsWith(\"#form.imoveis_hip.valor_total_imoveis[{form.processos_hip.imoveis}]\")  && !valor_total_text.isEmpty()){\r\n                    valor_total_text = valor_total_text.replace(\".\",\"\");\r\n                    valor_total_text = valor_total_text.replaceAll(\",\",\".\");\r\n                    String[] array = valor_total_text.split(\" \");\r\n                    double valor_total = Double.parseDouble(array[0]);\r\n                    if(valor_total >= 1000000){\r\n                        flagFiltro = 1;\r\n                        flagProducao = 0;\r\n                        flagConclusoes = 0;\r\n                    }\r\n                \r\n                }\r\n             \r\n            }\r\n            // se o valor do emprestimo ou o valor da garantia for superior a 1M vai para filtro\r\n            if(!valor_emprestimo_text.isEmpty()){\r\n                    valor_emprestimo_text = valor_emprestimo_text.replace(\".\",\"\");\r\n                    valor_emprestimo_text = valor_emprestimo_text.replaceAll(\",\",\".\");\r\n                    String[] array1 = valor_emprestimo_text.split(\" \");\r\n                    double valor_total1 = Double.parseDouble(array1[0]);\r\n                   // LogUtil.info(\"CCCCCCC\", \"valor_total1 \" + valor_total1 );\r\n                    if(valor_total1 >= 1000000){\r\n                        flagFiltro = 1;\r\n                        flagProducao = 0;\r\n                        flagConclusoes = 0;\r\n                    }\r\n            }\r\n            if(!valor_garantia_text.isEmpty()){\r\n                    valor_garantia_text = valor_garantia_text.replace(\".\",\"\");\r\n                    valor_garantia_text = valor_garantia_text.replaceAll(\",\",\".\");\r\n                    String[] array2 = valor_garantia_text.split(\" \");\r\n                    double valor_total2 = Double.parseDouble(array2[0]);\r\n                   // LogUtil.info(\"CCCCCCC\", \"valor_total2 \" + valor_total2 );\r\n                    if(valor_total2 >= 1000000 ){\r\n                        flagFiltro = 1;\r\n                        flagProducao = 0;\r\n                        flagConclusoes = 0;\r\n                    }\r\n            }\r\n            \r\n           \r\n            \r\n         \r\n        }\r\n        \r\n    }else if(processDefId.toLowerCase().contains(\"producao\")){\r\n        flagContratacao = 0;\r\n        flagFiltro = 0;\r\n        flagProducao = 0;\r\n        flagValidacao = 1;\r\n        flagAcompanhamento = 0;\r\n\t    flagRegistos = 0;\r\n\t    flagModelo11 = 0;\r\n        flagConclusoes = 0;\r\n        flagFinal = 0;\r\n        String estado_contratacao = \"#form.detalhe_proce_hip.estado_contratacao[{form.processos_hip.detalhe_processo}]#\";\r\n         if(estado_contratacao.equals(\"CLD\")){\r\n             flagConclusoes = 1;\r\n             flagContratacao = 0;\r\n             flagValidacao = 0;\r\n        }\r\n        \r\n    }else if(processDefId.toLowerCase().contains(\"validacao\")){\r\n        flagContratacao = 1;\r\n        flagFiltro = 0;\r\n        flagProducao = 1;\r\n        flagValidacao = 0;\r\n        if(passagem == \"1\"){\r\n            flagAcompanhamento = 0;\r\n        }else{\r\n            flagAcompanhamento = 0;\r\n        }\r\n\t    flagRegistos = 0;\r\n\t    flagModelo11 = 0;\r\n        flagConclusoes = 0;\r\n        flagFinal = 0;\r\n    }else if(processDefId.toLowerCase().contains(\"acompanhamento\")){\r\n        flagContratacao = 0;\r\n        flagFiltro = 0;\r\n        flagProducao = 0;\r\n        flagValidacao = 0;\r\n        flagAcompanhamento = 0;\r\n\t    flagRegistos = 1;\r\n\t    flagModelo11 = 0;\r\n        flagConclusoes = 0;\r\n        flagFinal = 0;\r\n    }else if(processDefId.toLowerCase().contains(\"registos\")){\r\n        flagContratacao = 0;\r\n        flagFiltro = 0;\r\n        flagProducao = 0;\r\n        flagValidacao = 0;\r\n        flagAcompanhamento = 1;\r\n\t    flagRegistos = 0;\r\n\t    flagModelo11 = 1;\r\n        flagConclusoes = 0;\r\n        flagFinal = 0;\r\n    }else if(processDefId.toLowerCase().contains(\"modelo11\")){\r\n        flagContratacao = 0;\r\n        flagFiltro = 0;\r\n        flagProducao = 0;\r\n        flagValidacao = 0;\r\n        flagAcompanhamento = 0;\r\n\t    flagRegistos = 0;\r\n\t    flagModelo11 = 0;\r\n        flagConclusoes = 1;\r\n        flagFinal = 0;\r\n    }else if(processDefId.toLowerCase().contains(\"conclusoes\")){\r\n        flagContratacao = 1;\r\n        flagFiltro = 0;\r\n        flagProducao = 0;\r\n        flagValidacao = 0;\r\n        flagAcompanhamento = 0;\r\n\t    flagRegistos = 0;\r\n        flagConclusoes = 0;\r\n        flagFinal = 1;\r\n    }else{\r\n        flagContratacao = 1;\r\n        flagFiltro = 1;\r\n        flagProducao = 1;\r\n        flagValidacao = 1;\r\n        \r\n        if(passagem == \"1\"){\r\n\t\t\tflagAcompanhamento = 1;\r\n\t\t\tflagRegistos = 1;\r\n\t\t\tflagModelo11 = 1;\r\n\t\t}else{\r\n\t\t\tflagAcompanhamento = 0;\r\n\t\t\tflagRegistos = 0;\r\n\t\t\tflagModelo11 = 0;\r\n\t\t} \r\n\t\t\r\n        flagConclusoes = 1;\r\n        flagFinal = 1;\r\n    }\r\n    \r\n        //add filtro Option\r\n    if(flagFiltro == 1){\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"filtro\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Filtro\");\r\n        rows.add(option);\r\n    } else{\r\n        \r\n        //add blank Option\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"\");\r\n        rows.add(option);\r\n        \r\n        //add Contratacao Option\r\n        if(flagContratacao == 1){\r\n            FormRow option = new FormRow();\r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"contratacao\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Contratação\");\r\n            rows.add(option);\r\n        }\r\n        \r\n        //add Produção Option\r\n        if(flagProducao == 1){\r\n            FormRow option = new FormRow();\r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"producao_manual\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Produção Manual\");\r\n            rows.add(option);\r\n            \r\n            FormRow option = new FormRow();\r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"producao_robot\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Produção Robot\");\r\n            rows.add(option);\r\n        }\r\n    \r\n        //add Validação Option\r\n        if(flagValidacao == 1){\r\n            FormRow option = new FormRow();\r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"validacao\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Validação\");\r\n            rows.add(option);\r\n            \r\n            FormRow option = new FormRow();\r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"producao_robot\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Produção Robot\");\r\n            rows.add(option);\r\n            \r\n        }\r\n        \r\n        //add Acompanhamento Outorgas Option                                                                                 \r\n        if(flagAcompanhamento == 1){                                                   \r\n            FormRow option = new FormRow();                                            \r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"acompanhamento_outorgas\");    \r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Acompanhamento de Outorgas\"); \r\n            rows.add(option);                                                                                                \r\n        }                                                                              \r\n    \t\r\n    \t//add Registos Option                                      \r\n        if(flagRegistos == 1){                                     \r\n            FormRow option = new FormRow();                         \r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"registos\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Registos\");\r\n            rows.add(option);                                       \r\n        }\r\n        \r\n        //add Modelo11 Option                                      \r\n        if(flagModelo11 == 1){                                     \r\n            FormRow option = new FormRow();                         \r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"modelo11\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Modelo 11\");\r\n            rows.add(option);                                       \r\n        }\r\n        \r\n        //add ConcLusões Option\r\n        if(flagConclusoes == 1){\r\n            FormRow option = new FormRow();\r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"conclusoes\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Conclusões\");\r\n            rows.add(option);\r\n        }\r\n    \r\n        \r\n        //add Final Option\r\n        if(flagFinal == 1){\r\n            FormRow option = new FormRow();\r\n            option.setProperty(FormUtil.PROPERTY_VALUE, \"final\");\r\n            option.setProperty(FormUtil.PROPERTY_LABEL, \"Final\");\r\n            rows.add(option);\r\n        }\r\n    }\r\n    return rows;\r\n}\r\n \r\n//call load method with injected variable\r\nreturn load(element, primaryKey, formData);",
                                    "useAjax": ""
                                }
                            },
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "org.joget.apps.form.lib.BeanShellValidator",
                                "properties": {
                                    "decoration": "*",
                                    "script": "import java.util.Arrays;\r\nimport org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.model.Element;\r\nimport org.joget.apps.form.model.Form;\r\nimport org.joget.apps.form.model.FormData;\r\nimport org.joget.apps.form.service.FormUtil;\r\nimport org.joget.commons.util.LogUtil;\r\n  \r\npublic boolean validate(Element element, FormData formData, String[] fileUploadValues){\r\n    \r\n    //Get value from workflow variable\r\n    String flagvalidate = \"#variable.flag_ultima_atividade#\";\r\n    \r\n    boolean result = true;\r\n    \r\n    //Only validate if it is the last activity of the subflow\r\n    if(flagvalidate.equals(\"1\")){\r\n        \r\n        //Configure field to validate - UPDATE HERE\r\n        String fieldId = \"envio_processo\";\r\n        \r\n        //Get element value\r\n        Form form = FormUtil.findRootForm(element);\r\n        Element field = FormUtil.findElement(fieldId, form, formData);\r\n        String fieldValue = FormUtil.getElementPropertyValue(field, formData);\r\n        \r\n        //If element is not filled give error message\r\n        if (fieldValue == null || fieldValue.equals(\"\")){\r\n            String id = FormUtil.getElementParameterName(element);\r\n            formData.addFormError(id, \"Campo obrigatório\");\r\n            result = false;\r\n        }else{\r\n            result = true;\r\n        }\r\n    }else{\r\n        result = true;\r\n    }\r\n\r\n    return result;\r\n\r\n}\r\n\r\n//call validate method with injected variable\r\nreturn validate(element, formData, values);"
                                }
                            },
                            "value": "",
                            "workflowVariable": "proxima_operativa"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "escalar_processo",
                            "label": "Dar conhecimento a:",
                            "multiple": "",
                            "options": [],
                            "optionsBinder": {
                                "className": "org.joget.apps.form.lib.BeanShellFormBinder",
                                "properties": {
                                    "cacheInterval": "",
                                    "script": "import org.joget.apps.app.service.AppUtil;\r\nimport org.joget.apps.form.dao.FormDataDao;\r\nimport org.joget.apps.form.model.FormRowSet;\r\nimport org.joget.apps.form.model.FormRow;\r\nimport org.joget.commons.util.LogUtil;\r\nimport org.joget.apps.form.service.FormUtil;\r\n\r\nFormRowSet f = new FormRowSet();\r\nFormRow option = new FormRow();\r\noption.setProperty(FormUtil.PROPERTY_VALUE, \"\");\r\noption.setProperty(FormUtil.PROPERTY_LABEL, \"\");\r\nf.add(option);\r\n\r\nString grupos = \"#currentUser.groups.name#\";\r\nString departamentos = \"#currentUser.department.name#\";\r\nString escalarProcesso = \"#form.detalhe_processo.escalar_processo[{form.processos.detalhe_processo}]#\";\r\n\r\n//if(\"#requestParam._mode#\".equals(\"edit\") && \"#request.requestURL#\".contains(\"processosEscalados\")){\r\n\r\n    FormRow option = new FormRow();\r\n    option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n    option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n    f.add(option);\r\n    FormRow option = new FormRow();\r\n    option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores;diretorCoordenador\");\r\n    option.setProperty(FormUtil.PROPERTY_LABEL, \"Diretores Coordenadores\");\r\n    f.add(option);\r\n    FormRow option = new FormRow();\r\n    option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores;diretorCoordenador;administracao\");\r\n    option.setProperty(FormUtil.PROPERTY_LABEL, \"Administração\");\r\n    f.add(option);\r\n    \r\n    /*if(grupos.contains(\"Coordenadores\")){\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores;diretorCoordenador\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Diretores Coordenadores\");\r\n        f.add(option);\r\n    } else if(grupos.contains(\"Diretor Coordenador\")){\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores;diretorCoordenador\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Diretores Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores;diretorCoordenador;administracao\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Administração\");\r\n        f.add(option);\r\n    } else if(departamentos.contains(\"PL_INT_ADM\")){\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores;diretorCoordenador\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Diretores Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores;diretorCoordenador;administracao\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Administração\");\r\n        f.add(option);\r\n    }*/\r\n\r\n//} else if(\"#requestParam._mode#\".equals(\"assignment\") && \"#request.requestURL#\".contains(\"filaTrabalho\")){\r\n\r\n    //Se for para escalar e só esse grupo ter visibilidade\r\n    /*FormRow option = new FormRow();\r\n    option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n    option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n    f.add(option);\r\n    FormRow option = new FormRow();\r\n    option.setProperty(FormUtil.PROPERTY_VALUE, \"diretorCoordenador\");\r\n    option.setProperty(FormUtil.PROPERTY_LABEL, \"Diretores Coordenadores\");\r\n    f.add(option);\r\n    FormRow option = new FormRow();\r\n    option.setProperty(FormUtil.PROPERTY_VALUE, \"administracao\");\r\n    option.setProperty(FormUtil.PROPERTY_LABEL, \"Administração\");\r\n    f.add(option);*/\r\n    \r\n    /*if(grupos.contains(\"Diretor Coordenador\")){\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"diretorCoordenador\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Diretores Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"administracao\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Administração\");\r\n        f.add(option);\r\n    } else if(departamentos.contains(\"PL_INT_ADM\")){\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"diretorCoordenador\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Diretores Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"administracao\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Administração\");\r\n        f.add(option);\r\n    } else if(grupos.contains(\"Coordenadores\")){\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n        f.add(option);\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"diretorCoordenador\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Diretores Coordenadores\");\r\n        f.add(option);\r\n    } else {\r\n        FormRow option = new FormRow();\r\n        option.setProperty(FormUtil.PROPERTY_VALUE, \"coordenadores\");\r\n        option.setProperty(FormUtil.PROPERTY_LABEL, \"Coordenadores\");\r\n        f.add(option);\r\n    }\r\n\r\n}*/\r\nreturn f;",
                                    "useAjax": ""
                                }
                            },
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "escalar_processos",
                            "label": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "value": "<script type=\"text/javascript\">\n\n    //$('select[id*=escalar_processo]').change(function(){\n    \n    $(window).on('load', function(){\n        \n        //console.log(\"Select box alterada\");\n        \n        var escalarProcesso = \"#form.detalhe_proce_hip.escalar_processo[{form.processos_hip.detalhe_processo}]#\";\n        \n        $('select[id*=escalar_processo]').val(escalarProcesso);\n\n    });\n\n<\/script>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "validacao_filtro",
                            "label": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "value": "<script>\n$(document).ready(function(){\n    \n    var processId = \"#process.processId#\";\n    \n    //Apenas validar na operativa de Filtro\n    if(!processId.includes(\"Filtro\")){\n        //$(\"select[name=multiPaged_1_menuPrincipal2_validar_filtro]\").val('SIM');\n       // $(\"select[name=multiPaged_1_menuPrincipal2_validar_filtro]\").prop('disabled', true);\n    }\n    \n   \n    \n});\n    \n    \n    \n<\/script>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.SelectBox",
                        "properties": {
                            "controlField": "",
                            "id": "validar_filtro",
                            "label": "Alterações a Processo validadas?",
                            "multiple": "",
                            "options": [
                                {
                                    "grouping": "",
                                    "label": "Sim",
                                    "value": "SIM"
                                },
                                {
                                    "grouping": "",
                                    "label": "Não",
                                    "value": "NAO"
                                }
                            ],
                            "optionsBinder": {
                                "className": "",
                                "properties": {}
                            },
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {
                                    "permissionHidden": "true",
                                    "readonly": ""
                                },
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                }
                            },
                            "readonly": "",
                            "readonlyLabel": "",
                            "size": "",
                            "validator": {
                                "className": "org.joget.apps.form.lib.BeanShellValidator",
                                "properties": {
                                    "decoration": "*",
                                    "script": "import java.util.Arrays;\nimport org.joget.apps.app.service.AppUtil;\nimport org.joget.apps.form.model.Element;\nimport org.joget.apps.form.model.Form;\nimport org.joget.apps.form.model.FormData;\nimport org.joget.apps.form.service.FormUtil;\nimport org.joget.commons.util.LogUtil;\n\n\npublic boolean validate(Element element, FormData formData, String[] fileUploadValues){\n    \n    String fieldId = \"validar_filtro\";\n\n    \n    Form form = FormUtil.findRootForm(element);\n    Element field = FormUtil.findElement(fieldId, form, formData);\n    String fieldValue = FormUtil.getElementPropertyValue(field, formData);\n    \n    boolean result=false;\n    \n    if(fieldValue.equals(\"SIM\")||fieldValue.isEmpty()){\n        result=true;\n    }else{\n        String id = FormUtil.getElementParameterName(element);\n        formData.addFormError(id, \"É necessário validar alterações feitas no processo\");\n        \n        \n    }\n    \n    return result;\n}\nreturn validate(element, formData, values);"
                                }
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    }
                ],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "passagemProcesso",
                "join": "",
                "label": "",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionHidden": "",
                "permissionReadonly": "",
                "permission_rules": {
                    "3b4737b8-9f04-a406-1394-9be597a75957": {},
                    "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                    "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                    "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                },
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.TextArea",
                        "properties": {
                            "cols": "20",
                            "id": "comentarios_processo",
                            "label": "Comentários Alocação/Alteração",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "rows": "5",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextArea",
                        "properties": {
                            "cols": "20",
                            "id": "comentarios_realocacao",
                            "label": "Comentários de Realocação :",
                            "permissionHidden": "",
                            "permission_rules": {
                                "3b4737b8-9f04-a406-1394-9be597a75957": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                }
                            },
                            "placeholder": "",
                            "readonly": "true",
                            "readonlyLabel": "",
                            "rows": "5",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    }
                ],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "comentarios",
                "join": "",
                "label": "Comentários",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionHidden": "true",
                "permissionReadonly": "",
                "permission_rules": {
                    "3b4737b8-9f04-a406-1394-9be597a75957": {
                        "permissionHidden": "",
                        "readonly": ""
                    },
                    "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {
                        "permissionHidden": "",
                        "readonly": ""
                    },
                    "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                    "a1f6b019-57c1-5d37-ff5e-d49298113548": {
                        "permissionHidden": "",
                        "readonly": ""
                    }
                },
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        },
        {
            "className": "org.joget.apps.form.model.Section",
            "elements": [{
                "className": "org.joget.apps.form.model.Column",
                "elements": [
                    {
                        "className": "org.joget.apps.form.lib.CustomHTML",
                        "properties": {
                            "autoPopulate": "",
                            "id": "field36",
                            "label": "",
                            "permission_rules": {
                                "04d94e96-37aa-1e4b-d5fe-5595f325e232": {},
                                "1fb8f1eb-7717-2af5-ccf1-03a73c560f16": {},
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "6c9a9c6d-bd10-4f4a-0682-541bcbb1222b": {},
                                "966fc1ca-d0b8-439f-6ab3-76cf9a599c75": {},
                                "9f700b46-bde2-cc69-98a7-c562c400ad6d": {},
                                "9fb8a08a-3747-1f8e-48ac-fff77f61d611": {},
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {},
                                "aa6ccea8-6e7f-1433-8d14-32132e9bf1e0": {},
                                "d07f81ea-a80c-4560-01fd-7772c1762b0f": {},
                                "d6fe0da9-3aa3-9d28-ded2-07a6fb980292": {},
                                "f6d47cc6-84dc-c359-9ec5-794a6dcbf118": {}
                            },
                            "value": "<div class=\"col text-start\">\r\n    <span class=\"material-symbols-rounded md-40\"> add_comment <\/span> \r\n\t<div class = \"subform-section-title\">\r\n\t\t<span>OBSERVAÇÕES GERAIS<\/span>\r\n\t<\/div> \r\n<\/div>"
                        }
                    },
                    {
                        "className": "org.joget.apps.form.lib.TextArea",
                        "properties": {
                            "cols": "20",
                            "id": "observacoes",
                            "label": "Observações",
                            "permissionHidden": "",
                            "permission_rules": {
                                "04d94e96-37aa-1e4b-d5fe-5595f325e232": {},
                                "1fb8f1eb-7717-2af5-ccf1-03a73c560f16": {},
                                "3b4737b8-9f04-a406-1394-9be597a75957": {},
                                "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                                "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                                "6c9a9c6d-bd10-4f4a-0682-541bcbb1222b": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "966fc1ca-d0b8-439f-6ab3-76cf9a599c75": {},
                                "9f700b46-bde2-cc69-98a7-c562c400ad6d": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "9fb8a08a-3747-1f8e-48ac-fff77f61d611": {
                                    "permissionHidden": "",
                                    "readonly": "true"
                                },
                                "a1f6b019-57c1-5d37-ff5e-d49298113548": {},
                                "aa6ccea8-6e7f-1433-8d14-32132e9bf1e0": {
                                    "permissionHidden": "",
                                    "readonly": ""
                                },
                                "d07f81ea-a80c-4560-01fd-7772c1762b0f": {},
                                "d6fe0da9-3aa3-9d28-ded2-07a6fb980292": {},
                                "f6d47cc6-84dc-c359-9ec5-794a6dcbf118": {}
                            },
                            "placeholder": "",
                            "readonly": "",
                            "readonlyLabel": "",
                            "rows": "5",
                            "validator": {
                                "className": "",
                                "properties": {}
                            },
                            "value": "",
                            "workflowVariable": ""
                        }
                    }
                ],
                "properties": {"width": "100%"}
            }],
            "properties": {
                "comment": "",
                "id": "section4_1_1",
                "join": "",
                "label": "",
                "loadBinder": {
                    "className": "",
                    "properties": {}
                },
                "permission": {
                    "className": "",
                    "properties": {}
                },
                "permissionReadonly": "",
                "permission_rules": {
                    "04d94e96-37aa-1e4b-d5fe-5595f325e232": {},
                    "1fb8f1eb-7717-2af5-ccf1-03a73c560f16": {},
                    "3b4737b8-9f04-a406-1394-9be597a75957": {},
                    "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf": {},
                    "5eaec58e-2e36-622b-6e03-4fd4d359d06d": {},
                    "6c9a9c6d-bd10-4f4a-0682-541bcbb1222b": {},
                    "966fc1ca-d0b8-439f-6ab3-76cf9a599c75": {},
                    "9f700b46-bde2-cc69-98a7-c562c400ad6d": {
                        "permissionHidden": "",
                        "readonly": ""
                    },
                    "9fb8a08a-3747-1f8e-48ac-fff77f61d611": {},
                    "a1f6b019-57c1-5d37-ff5e-d49298113548": {},
                    "aa6ccea8-6e7f-1433-8d14-32132e9bf1e0": {},
                    "d07f81ea-a80c-4560-01fd-7772c1762b0f": {},
                    "d6fe0da9-3aa3-9d28-ded2-07a6fb980292": {},
                    "f6d47cc6-84dc-c359-9ec5-794a6dcbf118": {}
                },
                "readonly": "",
                "readonlyLabel": "",
                "regex": "",
                "reverse": "",
                "storeBinder": {
                    "className": "",
                    "properties": {}
                },
                "visibilityControl": "",
                "visibilityValue": ""
            }
        }
    ],
    "properties": {
        "description": "",
        "id": "HIPResumo",
        "loadBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "name": "HIP - Resumo",
        "noPermissionMessage": "",
        "permission": {
            "className": "",
            "properties": {}
        },
        "permission_rules": [
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_HIP",
                        "orgId": "PL"
                    }
                },
                "permission_key": "3b4737b8-9f04-a406-1394-9be597a75957",
                "permission_name": "Contratação"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_VAL_BCP_COM_CRH;PL_INT_VAL_BCP_NOR_CRH;PL_INT_VAL_BNI_COM_CRH;PL_INT_VAL_BNI_NOR_CRH;PL_INT_VAL_BST_COM_CRH;PL_INT_VAL_BST_NOR_CRH;PL_INT_VAL_GEN_COM_CRH;PL_INT_VAL_GEN_NOR_CRH",
                        "orgId": ""
                    }
                },
                "permission_key": "4bd6a8aa-5603-0d51-6888-3adc2bc6cabf",
                "permission_name": "Validação"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_PRD_GEN_RPA_CRH",
                        "orgId": "PL"
                    }
                },
                "permission_key": "5eaec58e-2e36-622b-6e03-4fd4d359d06d",
                "permission_name": "Robot"
            },
            {
                "permission": {
                    "className": "org.joget.apps.userview.lib.DepartmentPermission",
                    "properties": {
                        "allowedDeptIds": "PL_INT_FLT_GEN_COM_CRH;PL_INT_FLT_GEN_NOR_CRH",
                        "orgId": "PL"
                    }
                },
                "permission_key": "a1f6b019-57c1-5d37-ff5e-d49298113548",
                "permission_name": "Filtro"
            }
        ],
        "postProcessor": {
            "className": "",
            "properties": {}
        },
        "postProcessorRunOn": "create",
        "storeBinder": {
            "className": "org.joget.apps.form.lib.WorkflowFormBinder",
            "properties": {}
        },
        "tableName": "detalhe_proce_hip"
    }
}